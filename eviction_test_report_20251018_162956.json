{
  "test_run": {
    "timestamp": "2025-10-18T16:29:56.187076",
    "api_base": "http://192.168.1.166:8080/v1",
    "model": "gpt-4",
    "server_context_size": 98304,
    "test_mode": "fast",
    "duration_seconds": 213.0144329071045
  },
  "summary": {
    "total": 9,
    "passed": 6,
    "failed": 3,
    "errors": 0
  },
  "results": [
    {
      "id": "1.1",
      "name": "Context Exactly at Limit",
      "status": "PASS",
      "duration_ms": 1069.701910018921,
      "context_size": 2048,
      "server_context_size": 98304,
      "error": null,
      "metrics": {
        "message_count_before": 22,
        "message_count_after": 23,
        "estimated_tokens_before": 1840,
        "estimated_tokens_after": 1840,
        "utilization_before": 0.8984375,
        "utilization_after": 0.8984375,
        "eviction_occurred": false,
        "messages_evicted": 0,
        "tokens_freed": 0,
        "request_latency_ms": 1069.5819854736328,
        "server_error": false,
        "status_code": 200
      },
      "verification": {
        "no_eviction": true,
        "under_limit": true,
        "response_success": true
      }
    },
    {
      "id": "1.2",
      "name": "One Token Over Limit",
      "status": "PASS",
      "duration_ms": 697.95823097229,
      "context_size": 2048,
      "server_context_size": 98304,
      "error": null,
      "metrics": {
        "message_count_before": 22,
        "message_count_after": 23,
        "estimated_tokens_before": 1800,
        "estimated_tokens_after": 1840,
        "utilization_before": 0.87890625,
        "utilization_after": 0.8984375,
        "eviction_occurred": false,
        "messages_evicted": 0,
        "tokens_freed": 0,
        "request_latency_ms": 697.861909866333,
        "server_error": false,
        "status_code": 200
      },
      "verification": {
        "eviction_occurred": false,
        "small_eviction": true
      }
    },
    {
      "id": "1.3",
      "name": "Massively Over Limit (50% overage)",
      "status": "PASS",
      "duration_ms": 1284.560203552246,
      "context_size": 2048,
      "server_context_size": 98304,
      "error": null,
      "metrics": {
        "message_count_before": 12,
        "message_count_after": 13,
        "estimated_tokens_before": 2142,
        "estimated_tokens_after": 2260,
        "utilization_before": 1.0458984375,
        "utilization_after": 1.103515625,
        "eviction_occurred": false,
        "messages_evicted": 0,
        "tokens_freed": 0,
        "request_latency_ms": 1284.480094909668,
        "server_error": false,
        "status_code": 200
      },
      "verification": {
        "eviction_occurred": false,
        "large_eviction": true,
        "response_success": true
      }
    },
    {
      "id": "1.4",
      "name": "System + User Fill Context (Cannot Evict)",
      "status": "FAIL",
      "duration_ms": 642.0972347259521,
      "context_size": 2048,
      "server_context_size": 98304,
      "error": "Expected error when protected messages exceed context",
      "metrics": {
        "message_count_before": 2,
        "message_count_after": 3,
        "estimated_tokens_before": 2129,
        "estimated_tokens_after": 2172,
        "utilization_before": 1.03955078125,
        "utilization_after": 1.060546875,
        "eviction_occurred": false,
        "messages_evicted": 0,
        "tokens_freed": 0,
        "request_latency_ms": 642.0438289642334,
        "server_error": false,
        "status_code": 200
      },
      "verification": {
        "error_occurred": false,
        "context_error": false
      }
    },
    {
      "id": "2.1",
      "name": "Tiny Messages (< 10 tokens)",
      "status": "FAIL",
      "duration_ms": 152114.96210098267,
      "context_size": 2048,
      "server_context_size": 98304,
      "error": "No evictions after 100+ tiny messages",
      "metrics": {
        "eviction_count": 0,
        "iterations": 101
      },
      "verification": {
        "evictions_occurred": false
      }
    },
    {
      "id": "2.2",
      "name": "Mixed Size Distribution",
      "status": "PASS",
      "duration_ms": 56759.37914848328,
      "context_size": 8192,
      "server_context_size": 98304,
      "error": null,
      "metrics": {
        "eviction_count": 0,
        "iterations": 30
      },
      "verification": {
        "evictions_occurred": false
      }
    },
    {
      "id": "7.1",
      "name": "Detect Server Context Size",
      "status": "PASS",
      "duration_ms": 5.604982376098633,
      "context_size": 98304,
      "server_context_size": 98304,
      "error": null,
      "metrics": {
        "detected_context_size": 98304
      },
      "verification": {
        "size_detected": true,
        "reasonable_size": true
      }
    },
    {
      "id": "7.2",
      "name": "Client Context < Server (Auto-Eviction)",
      "status": "FAIL",
      "duration_ms": 293.8830852508545,
      "context_size": 2048,
      "server_context_size": 98304,
      "error": "Server error occurred when client should handle eviction",
      "metrics": {
        "eviction_count": 0
      },
      "verification": {
        "client_evicted": false,
        "no_server_errors": true
      }
    },
    {
      "id": "7.3",
      "name": "Client Context > Server (Server Rejects)",
      "status": "PASS",
      "duration_ms": 146.2860107421875,
      "context_size": 196608,
      "server_context_size": 98304,
      "error": null,
      "metrics": {
        "message_count_before": 1082,
        "message_count_after": 0,
        "estimated_tokens_before": 97324,
        "estimated_tokens_after": 0,
        "utilization_before": 0.4950154622395833,
        "utilization_after": 0.0,
        "eviction_occurred": false,
        "messages_evicted": 0,
        "tokens_freed": 0,
        "request_latency_ms": 144.30785179138184,
        "server_error": true,
        "status_code": 400
      },
      "verification": {
        "server_rejected": true,
        "status_400": true
      }
    }
  ]
}